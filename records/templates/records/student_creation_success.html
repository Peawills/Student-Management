{% extends "records/base.html" %}
{% load static %}

{% block title %}Student Created Successfully{% endblock %}

{% block extra_css %}
<style>
    .success-container {
        max-width: 800px;
        margin: 2rem auto;
        background: white;
        padding: 2.5rem;
        border-radius: 15px;
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);
        text-align: center;
    }

    .success-icon {
        font-size: 4rem;
        color: #198754;
        margin-bottom: 1rem;
    }

    .success-title {
        font-size: 2rem;
        font-weight: 700;
        color: #343a40;
        margin-bottom: 0.5rem;
    }

    .success-subtitle {
        font-size: 1.1rem;
        color: #6c757d;
        margin-bottom: 2rem;
    }

    .credentials-card {
        background: #f8f9fa;
        border: 1px solid #e9ecef;
        border-radius: 12px;
        padding: 1.5rem;
        margin-bottom: 1.5rem;
        text-align: left;
    }

    .credentials-card h4 {
        font-weight: 600;
        color: var(--primary-color);
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .credential-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0.75rem 0;
        border-bottom: 1px solid #dee2e6;
    }

    .credential-item:last-child {
        border-bottom: none;
    }

    .credential-item strong {
        color: #495057;
    }

    .credential-item span {
        font-family: 'Courier New', Courier, monospace;
        background: #e9ecef;
        padding: 0.25rem 0.5rem;
        border-radius: 6px;
        font-weight: 600;
    }

    .action-buttons {
        display: flex;
        justify-content: center;
        gap: 1rem;
        margin-top: 2.5rem;
    }

    .btn-action {
        padding: 0.75rem 1.5rem;
        font-weight: 600;
        border-radius: 8px;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
    }
</style>
{% endblock %}

{% block content %}
<div class="success-container">
    <div class="success-icon">
        <i class="bi bi-check-circle-fill"></i>
    </div>
    <h1 class="success-title">Student Created Successfully!</h1>
    <p class="success-subtitle">
        The portal login details for <strong>{{ student.full_name }}</strong> and their parent have been generated.
    </p>

    <!-- Student Credentials -->
    <div class="credentials-card">
        <h4><i class="bi bi-person-fill"></i>Student Login Details</h4>
        <div class="credential-item"><strong>Username:</strong> <span>{{ student_login.username }}</span></div>
        <div class="credential-item"><strong>Password:</strong> <span>{{ student_login.password }}</span></div>
    </div>

    <!-- Parent Credentials -->
    {% if parent_invitation_url %}
    <div class="credentials-card">
        <h4><i class="bi bi-envelope-paper-heart"></i>Parent Invitation Link</h4>
        <div class="alert alert-info mt-3">
            <p class="mb-2">Please share the following secure link with the parent (<strong>{{ student.father_name }}</strong>) to allow them to create their portal account:</p>
            <div class="input-group">
                <input type="text" class="form-control" value="{{ parent_invitation_url }}" id="invitationLink" readonly>
                <button class="btn btn-outline-secondary" type="button" onclick="copyLink()" id="copyBtn"><i class="bi bi-clipboard"></i> Copy</button>
            </div>
        </div>
    </div>
    {% endif %}

    <div class="action-buttons">
        <a href="{% url 'records:student_detail' student.pk %}" class="btn btn-secondary btn-action"><i class="bi bi-person-lines-fill"></i> View Student Profile</a>
        <a href="{% url 'records:student_create' %}" class="btn btn-primary btn-action"><i class="bi bi-plus-circle"></i> Add Another Student</a>
    </div>
</div>
{% endblock %}